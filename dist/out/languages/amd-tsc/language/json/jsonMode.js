var __extends=this&&this.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),__createBinding=this&&this.__createBinding||(Object.create?function(e,n,t,o){void 0===o&&(o=t);var r=Object.getOwnPropertyDescriptor(n,t);r&&!("get"in r?!n.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,o,r)}:function(e,n,t,o){void 0===o&&(o=t),e[o]=n[t]}),__exportStar=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||__createBinding(n,e,t)};define(["require","exports","./workerManager","../common/lspLanguageFeatures","./tokenization","../../fillers/monaco-editor-core","./workerManager","../common/lspLanguageFeatures"],(function(e,n,t,o,r,i,a,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.WorkerManager=n.setupMode=void 0;var u=function(e){function n(n,t,o){var r=e.call(this,n,t,o.onDidChange)||this;return r._disposables.push(i.editor.onWillDisposeModel((function(e){r._resetSchema(e.uri)}))),r._disposables.push(i.editor.onDidChangeModelLanguage((function(e){r._resetSchema(e.model.uri)}))),r}return __extends(n,e),n.prototype._resetSchema=function(e){this._worker().then((function(n){n.resetSchema(e.toString())}))},n}(o.DiagnosticsAdapter);function g(e){return{dispose:function(){return c(e)}}}function c(e){for(;e.length;)e.pop().dispose()}n.setupMode=function(e){var n=[],a=[],s=new t.WorkerManager(e);n.push(s);var p=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return s.getLanguageServiceWorker.apply(s,e)};function l(){var n=e.languageId,t=e.modeConfiguration;c(a),t.documentFormattingEdits&&a.push(i.languages.registerDocumentFormattingEditProvider(n,new o.DocumentFormattingEditProvider(p))),t.documentRangeFormattingEdits&&a.push(i.languages.registerDocumentRangeFormattingEditProvider(n,new o.DocumentRangeFormattingEditProvider(p))),t.completionItems&&a.push(i.languages.registerCompletionItemProvider(n,new o.CompletionAdapter(p,[" ",":",'"']))),t.hovers&&a.push(i.languages.registerHoverProvider(n,new o.HoverAdapter(p))),t.documentSymbols&&a.push(i.languages.registerDocumentSymbolProvider(n,new o.DocumentSymbolAdapter(p))),t.tokens&&a.push(i.languages.setTokensProvider(n,(0,r.createTokenizationSupport)(!0))),t.colors&&a.push(i.languages.registerColorProvider(n,new o.DocumentColorAdapter(p))),t.foldingRanges&&a.push(i.languages.registerFoldingRangeProvider(n,new o.FoldingRangeAdapter(p))),t.diagnostics&&a.push(new u(n,p,e)),t.selectionRanges&&a.push(i.languages.registerSelectionRangeProvider(n,new o.SelectionRangeAdapter(p)))}l(),n.push(i.languages.setLanguageConfiguration(e.languageId,d));var f=e.modeConfiguration;return e.onDidChange((function(e){e.modeConfiguration!==f&&(f=e.modeConfiguration,l())})),n.push(g(a)),g(n)};var d={wordPattern:/(-?\d*\.\d\w*)|([^\[\{\]\}\:\"\,\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"]],autoClosingPairs:[{open:"{",close:"}",notIn:["string"]},{open:"[",close:"]",notIn:["string"]},{open:'"',close:'"',notIn:["string"]}]};Object.defineProperty(n,"WorkerManager",{enumerable:!0,get:function(){return a.WorkerManager}}),__exportStar(s,n)}));