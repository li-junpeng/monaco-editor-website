var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},__assign.apply(this,arguments)},__awaiter=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(n,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},__generator=this&&this.__generator||function(t,e){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(i=1,r&&(n=2&u[0]?r.return:u[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,u[1])).done)return n;switch(r=0,n&&(u=[2&u[0],n.value]),u[0]){case 0:case 1:n=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!n||u[1]>n[0]&&u[1]<n[3])){a.label=u[1];break}if(6===u[0]&&a.label<n[1]){a.label=n[1],n=u;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(u);break}n[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{i=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};define(["require","exports","./lib/typescriptServices","./lib/lib"],(function(t,e,i,r){"use strict";function n(t){return"string"==typeof t?!!/^file:\/\/\//.test(t)&&!!r.libFileMap[t.substr(8)]:0===t.path.indexOf("/lib.")&&!!r.libFileMap[t.path.slice(1)]}Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.TypeScriptWorker=void 0;var o=function(){function t(t,e){this._extraLibs=Object.create(null),this._languageService=i.createLanguageService(this),this._ctx=t,this._compilerOptions=e.compilerOptions,this._extraLibs=e.extraLibs,this._inlayHintsOptions=e.inlayHintsOptions}return t.prototype.getCompilationSettings=function(){return this._compilerOptions},t.prototype.getLanguageService=function(){return this._languageService},t.prototype.getExtraLibs=function(){return this._extraLibs},t.prototype.getScriptFileNames=function(){return this._ctx.getMirrorModels().map((function(t){return t.uri})).filter((function(t){return!n(t)})).map((function(t){return t.toString()})).concat(Object.keys(this._extraLibs))},t.prototype._getModel=function(t){for(var e=this._ctx.getMirrorModels(),i=0;i<e.length;i++){var r=e[i].uri;if(r.toString()===t||r.toString(!0)===t)return e[i]}return null},t.prototype.getScriptVersion=function(t){var e=this._getModel(t);return e?e.version.toString():this.isDefaultLibFileName(t)?"1":t in this._extraLibs?String(this._extraLibs[t].version):""},t.prototype.getScriptText=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2,this._getScriptText(t)]}))}))},t.prototype._getScriptText=function(t){var e,i=this._getModel(t),n="lib."+t+".d.ts";if(i)e=i.getValue();else if(t in r.libFileMap)e=r.libFileMap[t];else if(n in r.libFileMap)e=r.libFileMap[n];else{if(!(t in this._extraLibs))return;e=this._extraLibs[t].content}return e},t.prototype.getScriptSnapshot=function(t){var e=this._getScriptText(t);if(void 0!==e)return{getText:function(t,i){return e.substring(t,i)},getLength:function(){return e.length},getChangeRange:function(){}}},t.prototype.getScriptKind=function(t){switch(t.substr(t.lastIndexOf(".")+1)){case"ts":return i.ScriptKind.TS;case"tsx":return i.ScriptKind.TSX;case"js":return i.ScriptKind.JS;case"jsx":return i.ScriptKind.JSX;default:return this.getCompilationSettings().allowJs?i.ScriptKind.JS:i.ScriptKind.TS}},t.prototype.getCurrentDirectory=function(){return""},t.prototype.getDefaultLibFileName=function(t){switch(t.target){case 99:var e="lib.esnext.full.d.ts";if(e in r.libFileMap||e in this._extraLibs)return e;case 7:case 6:case 5:case 4:case 3:case 2:default:var i="lib.es".concat(2013+(t.target||99),".full.d.ts");return i in r.libFileMap||i in this._extraLibs?i:"lib.es6.d.ts";case 1:case 0:return"lib.d.ts"}},t.prototype.isDefaultLibFileName=function(t){return t===this.getDefaultLibFileName(this._compilerOptions)},t.prototype.readFile=function(t){return this._getScriptText(t)},t.prototype.fileExists=function(t){return void 0!==this._getScriptText(t)},t.prototype.getLibFiles=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,r.libFileMap]}))}))},t.clearFiles=function(t){for(var e=[],i=0,r=t;i<r.length;i++){var n=r[i],o=__assign({},n);if(o.file=o.file?{fileName:o.file.fileName}:void 0,n.relatedInformation){o.relatedInformation=[];for(var a=0,u=n.relatedInformation;a<u.length;a++){var s=u[a],c=__assign({},s);c.file=c.file?{fileName:c.file.fileName}:void 0,o.relatedInformation.push(c)}}e.push(o)}return e},t.prototype.getSyntacticDiagnostics=function(e){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(r){return n(e)?[2,[]]:(i=this._languageService.getSyntacticDiagnostics(e),[2,t.clearFiles(i)])}))}))},t.prototype.getSemanticDiagnostics=function(e){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(r){return n(e)?[2,[]]:(i=this._languageService.getSemanticDiagnostics(e),[2,t.clearFiles(i)])}))}))},t.prototype.getSuggestionDiagnostics=function(e){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(r){return n(e)?[2,[]]:(i=this._languageService.getSuggestionDiagnostics(e),[2,t.clearFiles(i)])}))}))},t.prototype.getCompilerOptionsDiagnostics=function(e){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(r){return n(e)?[2,[]]:(i=this._languageService.getCompilerOptionsDiagnostics(),[2,t.clearFiles(i)])}))}))},t.prototype.getCompletionsAtPosition=function(t,e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){return n(t)?[2,void 0]:[2,this._languageService.getCompletionsAtPosition(t,e,void 0)]}))}))},t.prototype.getCompletionEntryDetails=function(t,e,i){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(r){return[2,this._languageService.getCompletionEntryDetails(t,e,i,void 0,void 0,void 0,void 0)]}))}))},t.prototype.getSignatureHelpItems=function(t,e,i){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(r){return n(t)?[2,void 0]:[2,this._languageService.getSignatureHelpItems(t,e,i)]}))}))},t.prototype.getQuickInfoAtPosition=function(t,e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){return n(t)?[2,void 0]:[2,this._languageService.getQuickInfoAtPosition(t,e)]}))}))},t.prototype.getDocumentHighlights=function(t,e,i){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(r){return n(t)?[2,void 0]:[2,this._languageService.getDocumentHighlights(t,e,i)]}))}))},t.prototype.getDefinitionAtPosition=function(t,e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){return n(t)?[2,void 0]:[2,this._languageService.getDefinitionAtPosition(t,e)]}))}))},t.prototype.getReferencesAtPosition=function(t,e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){return n(t)?[2,void 0]:[2,this._languageService.getReferencesAtPosition(t,e)]}))}))},t.prototype.getNavigationTree=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return n(t)?[2,void 0]:[2,this._languageService.getNavigationTree(t)]}))}))},t.prototype.getFormattingEditsForDocument=function(t,e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){return n(t)?[2,[]]:[2,this._languageService.getFormattingEditsForDocument(t,e)]}))}))},t.prototype.getFormattingEditsForRange=function(t,e,i,r){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(o){return n(t)?[2,[]]:[2,this._languageService.getFormattingEditsForRange(t,e,i,r)]}))}))},t.prototype.getFormattingEditsAfterKeystroke=function(t,e,i,r){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(o){return n(t)?[2,[]]:[2,this._languageService.getFormattingEditsAfterKeystroke(t,e,i,r)]}))}))},t.prototype.findRenameLocations=function(t,e,i,r,o){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(a){return n(t)?[2,void 0]:[2,this._languageService.findRenameLocations(t,e,i,r,o)]}))}))},t.prototype.getRenameInfo=function(t,e,i){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(r){return n(t)?[2,{canRename:!1,localizedErrorMessage:"Cannot rename in lib file"}]:[2,this._languageService.getRenameInfo(t,e,i)]}))}))},t.prototype.getEmitOutput=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return n(t)?[2,{outputFiles:[],emitSkipped:!0}]:[2,this._languageService.getEmitOutput(t)]}))}))},t.prototype.getCodeFixesAtPosition=function(t,e,i,r,o){return __awaiter(this,void 0,void 0,(function(){var a;return __generator(this,(function(u){if(n(t))return[2,[]];a={};try{return[2,this._languageService.getCodeFixesAtPosition(t,e,i,r,o,a)]}catch(t){return[2,[]]}return[2]}))}))},t.prototype.updateExtraLibs=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return this._extraLibs=t,[2]}))}))},t.prototype.provideInlayHints=function(t,e,i){var r;return __awaiter(this,void 0,void 0,(function(){var o,a;return __generator(this,(function(u){if(n(t))return[2,[]];o=null!==(r=this._inlayHintsOptions)&&void 0!==r?r:{},a={start:e,length:i-e};try{return[2,this._languageService.provideInlayHints(t,a,o)]}catch(t){return[2,[]]}return[2]}))}))},t}();e.TypeScriptWorker=o,e.create=function(t,e){var n=o;if(e.customWorkerPath)if("undefined"==typeof importScripts)console.warn("Monaco is not using webworkers for background tasks, and that is needed to support the customWorkerPath flag");else{self.importScripts(e.customWorkerPath);var a=self.customTSWorkerFactory;if(!a)throw new Error("The script at ".concat(e.customWorkerPath," does not add customTSWorkerFactory to self"));n=a(o,i,r.libFileMap)}return new n(t,e)},globalThis.ts=i.typescript}));